// Gradle build script. Only tests are here. Used mainly for Travis CI

repositories {
  mavenCentral()
}

configurations {
  saxon
}

dependencies {
  saxon 'net.sf.saxon:Saxon-HE:9.6.0-3'
}

// determine path to Saxon jar file downloaded from Maven central
def findSaxonJar() {
  return configurations.saxon.asPath
}

task preprocessTests(type:Exec) {
    workingDir 'test/'
    environment SAXON_PATH: findSaxonJar()
    executable 'python'
    args '../ctt/ctt.py', 'preprocess_tests.xml'
}

task generateTests(type:Exec) {
    workingDir 'test/'
    environment SAXON_PATH: findSaxonJar()
    executable 'python'
    args '../ctt/ctt.py', 'generate_tests.xml'
}


task check(dependsOn: ['preprocessTests', 'generateTests']) << {
  println("Check")

}

